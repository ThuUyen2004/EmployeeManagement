@await Html.PartialAsync("Header")
<div class="container-fluid">
    <main role="main" class="pb-3">
        <div class="container-fluid mb-3">

            <!-- HÀNG TRÊN: Công cụ chính -->
            <div class="d-flex flex-wrap justify-content-between align-items-center gap-2 mb-2">



                <div class="d-flex flex-wrap align-items-center gap-2">

                    <!-- Nút thêm sản phẩm -->
                    <button class="btn btn-success" id="btnAdd">
                        <i class="bi bi-plus-circle"></i> Thêm sản phẩm
                    </button>

                    <!-- Ghi âm -->
                    <button class="btn btn-outline-secondary" id="btnVoice" title="Nhấn để bật/tắt ghi âm">
                        🎙️
                    </button>

                    <!-- Ô tìm kiếm -->
                    <div class="position-relative" style="max-width: 350px;">
                        <i class="ri-search-line position-absolute top-50 start-0 translate-middle-y ms-2 text-muted"></i>
                        <input type="search" id="keyword" class="form-control ps-4" placeholder="Nhập để tìm kiếm...">
                    </div>

                    <!-- Nút tìm -->
                    <button class="btn btn-primary d-flex align-items-center gap-1" id="btnSearch">
                        <i class="ri-search-line"></i> Tìm
                    </button>

                    <!-- Nút làm mới -->
                    <button class="btn btn-outline-secondary d-flex align-items-center gap-1" id="btnReset">
                        <i class="bi bi-arrow-clockwise"></i> Làm mới
                    </button>
                    <!-- Nút xóa nhiều -->
                    <button id="btnDeletes" class="btn btn-danger d-none">
                        <i class="bi bi-trash"></i> Xóa các sản phẩm đã chọn
                    </button>

                    <!-- Xuất dữ liệu -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-primary dropdown-toggle d-flex align-items-end gap-1" data-bs-toggle="dropdown" aria-expanded="false">
                            Xuất dữ liệu
                        </button>
                        <ul class="dropdown-menu">
                            <li><button class="dropdown-item" id="btnExportExcel" value=1>Excel</button></li>


                        </ul>
                    </div>

                    <!-- Nhập dữ liệu -->
                    <div class="btn-group">
                        <button type="button" class="btn btn-success dropdown-toggle d-flex align-items-end gap-1" data-bs-toggle="dropdown" aria-expanded="false">
                            Nhập dữ liệu
                        </button>
                        <ul class="dropdown-menu">
                            <li><button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#uploadExcelModal">Excel</button></li>
                            <li><button class="dropdown-item" data-bs-toggle="modal" data-bs-target="#uploadPdfModal">PDF</button></li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- HÀNG DƯỚI: Các bộ lọc -->
            <div class="card p-3 border-light shadow-sm">
                <div class="row g-3 align-items-end">

                    <!-- Lọc theo danh mục -->
                    <div class="col-md-3 col-sm-6">
                        <label for="categoryFilter" class="form-label fw-semibold mb-1">Danh mục</label>
                        <select id="categoryFilter" class="form-select">
                            <option value="">Tất cả danh mục</option>
                            <!-- JS load -->
                        </select>
                    </div>

                    <!-- Lọc theo giá -->

                    <div class="col-md-2 col-sm-6">
                        <label for="priceFrom" class="form-label fw-semibold mb-1">Giá từ</label>
                        <select id="priceFrom" class="form-select">
                            <option value="">Chọn giá</option>
                            <option value="0">Dưới 1 triệu</option>
                            <option value="1000000">Từ 1 triệu</option>
                            <option value="3000000">Từ 3 triệu</option>
                            <option value="5000000">Từ 5 triệu</option>
                            <option value="10000000">Từ 10 triệu</option>
                            <option value="20000000">Từ 20 triệu</option>
                            <option value="30000000">Từ 30 triệu</option>
                        </select>
                    </div>

                    <!-- Giá đến -->
                    <div class="col-md-2 col-sm-6">
                        <label for="priceTo" class="form-label fw-semibold mb-1">Giá đến</label>
                        <select id="priceTo" class="form-select">
                            <option value="">Chọn giá</option>
                            <option value="1000000">1 triệu</option>
                            <option value="3000000">3 triệu</option>
                            <option value="5000000">5 triệu</option>
                            <option value="10000000">10 triệu</option>
                            <option value="20000000">20 triệu</option>
                            <option value="30000000">30 triệu</option>
                            <option value="50000000">Trên 30 triệu</option>
                        </select>
                    </div>


                    <!-- Lọc theo số lượng -->
                    <div class="col-md-3 col-sm-6">
                        <label class="form-label fw-semibold mb-1">Khoảng số lượng</label>
                        <div class="d-flex align-items-center gap-1">
                            <input type="number" id="quantityFrom" class="form-control form-control-sm" placeholder="Từ">
                            <span class="text-muted">-</span>
                            <input type="number" id="quantityTo" class="form-control form-control-sm" placeholder="Đến">
                        </div>
                    </div>

                    <!-- Lọc theo ngày tạo -->
                    <div class="col-md-4 col-sm-6">
                        <label class="form-label fw-semibold mb-1">Ngày tạo</label>
                        <div class="d-flex align-items-center gap-1">
                            <input type="date" id="createDateFrom" class="form-control form-control-sm">
                            <span>-</span>
                            <input type="date" id="createDateTo" class="form-control form-control-sm">
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="table-responsive shadow-sm rounded-3">
            <table class="table table-hover align-middle mb-0" style="table-layout: fixed; width: 100%;">
                <thead class="bg-gradient bg-dark text-white text-center">
                    <tr>
                        <th style="width:4%;">
                            <input class="form-check-input" id="checkAll" type="checkbox" />
                        </th>
                        <th style="width:4%;">#</th>
                        <th style="width:5%;">Ảnh</th>
                        <th style="width:15%;">Tên sản phẩm</th>
                        <th style="width:14%;">Danh mục</th>
                        <th style="width:10%;">Giá</th>
                        <th style="width:5%;">Số lượng</th>
                        <th style="width:14%;">Từ khóa</th>
                        <th style="width:9%;">Ngày tạo</th>
                        <th style="width:9%;">Người tạo</th>
                        <th style="width:15%;">Thao tác</th>
                    </tr>
                </thead>
                <tbody id="productList">
                    <tr>
                        <td colspan="12" class="text-center py-5 text-muted">
                            <div class="spinner-border text-secondary" role="status"></div>
                            <div class="mt-2">Đang tải dữ liệu...</div>
                        </td>
                    </tr>
                </tbody>
            </table>

            <!-- Modal Upload Excel -->
            <div class="modal fade" id="uploadExcelModal" tabindex="-1" aria-labelledby="uploadExcelLabel" aria-hidden="true">
                <div class="modal-dialog modal-lg modal-dialog-centered">
                    <div class="modal-content shadow-lg border-0 rounded-4">
                        <div class="modal-header bg-primary text-white pb-3 rounded-top-4">
                            <h5 class="modal-title fw-bold d-flex  text-white align-items-center gap-2" id="uploadExcelLabel">
                                <i class="bi bi-file-earmark-spreadsheet-fill"></i>
                                Nhập dữ liệu từ Excel
                            </h5>
                            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Đóng"></button>
                        </div>

                        <div class="modal-body p-4">
                            <div class="text-center mb-3">
                                <i class="bi bi-upload fs-1 text-success"></i>
                                <p class="text-muted mt-2 mb-0">
                                    Chọn file Excel chứa danh sách sản phẩm để nhập dữ liệu vào hệ thống.
                                </p>
                            </div>

                            <div class="mb-3">
                                <label for="excelFile" class="form-label fw-semibold">Chọn file Excel</label>
                                <input type="file" name="excelFile" id="excelFile" accept=".xlsx,.xls" class="form-control" required>
                                <small class="text-muted d-block mt-1">
                                    ⚠️ Chỉ hỗ trợ định dạng <strong>.xlsx</strong> hoặc <strong>.xls</strong>.
                                </small>
                            </div>

                            <div class="alert alert-info d-flex align-items-center gap-2 p-2 mb-0">
                                <i class="bi bi-info-circle-fill"></i>
                                <div>
                                    <strong>Lưu ý:</strong> Cấu trúc file Excel phải có các cột như:
                                    <code>Tên sản phẩm</code>,<code>Mô tả</code> <code>Giá</code>, <code>Số lượng</code>, <code>Từ khóa</code>, <code>Danh mục</code>, ...
                                </div>
                            </div>
                        </div>

                        <div class="modal-footer border-0 d-flex justify-content-between align-items-center">
                            <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                                <i class="bi bi-x-circle"></i> Hủy
                            </button>
                            <button type="button" class="btn btn-success d-flex align-items-center gap-2" id="btnImportExcel">
                                <i class="bi bi-cloud-arrow-up"></i> Tải lên
                            </button>
                        </div>
                    </div>
                </div>
            </div>



        </div>
        <div id="pagination" class="mt-3 d-flex justify-content-center"></div>

   

    </main>
</div>

